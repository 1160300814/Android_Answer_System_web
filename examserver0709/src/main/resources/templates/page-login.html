<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>


<input type="text" name="name" id="name" onblur="check_user()">
<input type="password" id="passwd">
<input type="button" value="submit" onclick="go()">
<span id="sss"></span>

<script th:src="@{/jquery-3.4.1.min.js}"></script>

<script>
    function check_user(){
        var name = $("#name").val();
        var mJSON = {"username": name, "userpassword": ""}
        sendRequest("check", "POST", mJSON, 2)
    }

    function go() {
        var name = $("#name").val();
        var passwd = $("#passwd").val();
        //使用GET方法发送数据
        //sendRequest("loginget","GET","name="+name+"&password="+passwd)

        //使用POST方法发送数据
        var mJSON = {"username": name, "userpassword": passwd}
        sendRequest("login", "POST", mJSON, 1)
    }

    /**
     * 发送请求
     * 使用Ajax
     */
    function sendRequest(url, method, data, id) {
        var mId = id;
        if (method === "GET") {
            $.ajax({
                type: method,
                url: url + "?" + data,
                dataType: "text",
                success: function (data) {
                    alert(data)
                },
                error: function (jqXHR) {
                    alert(jqXHR.status)
                }
            })
        }
        if (method === "POST") {
            $.ajax({
                type: method,
                url: url,
                data: JSON.stringify(data),
                dataType: "json",
                contentType: "application/json;charset=utf-8",
                success: function (data) {
                    processResult(data,mId)
                },
                error: function (jqXHR) {
                    alert(jqXHR.status)
                }
            })
        }
    }

    function processResult(data, id) {
        if (id === 1) { //判断登录
            if (data.code === "100") {
                window.location.href = data.location
            }
        }
        if(id === 2){
            //用户名检查是否存在
            if (data.code === "100") { //用户名存在
                alert("用户名输入正确")
            }else{
                alert("无此用户")
            }
        }
    }

</script>
</body>
</html>